---
title: 'Fetching Data'  
description: ''  
---

## On the Client Side

In our frontend, **React Query** is our chosen tool for fetching data. It handles caching, retries, and background refetching, ensuring efficient data management across our application. Below are some simplified examples, including error handling within components.

### Basic Usage of `useQuery`

A typical data-fetching pattern with React Query follows this structure:

```javascript
const { data, isLoading, isError } = useQuery({
  queryKey: ["unique-query-key"],
  queryFn: fetchFunction,  // Function to perform the API call
});
```

The `queryKey` uniquely identifies each query, and `queryFn` is the function responsible for fetching data. You can also handle loading and error states to display appropriate messages or actions in the UI.

---

### Examples

#### 1. Fetching User Course Data with Basic Error Handling

```javascript
const { data, isLoading, isError } = useQuery({
  queryKey: ["user-course-data"],
  queryFn: getUserCourseData,
});
```

This query fetches essential user course data and handles both loading and error states. The `isLoading` and `isError` flags allow for conditional UI rendering based on data-fetching status.

---

### 2. Fetching Course Layers in a Component with Error Handling

Below is an example of using `useQuery` within a React component, including error handling to display a user-friendly message if the data fails to load.

```javascript
import React from "react";
import { useQuery } from "react-query";

const CourseLayers = () => {
  const { data: courseLayers, isLoading, isError, error } = useQuery({
    queryKey: ["course-layers"],
    queryFn: getCourseLayers,
  });

  if (isLoading) return <p>Loading course layers...</p>;

  if (isError) {
    return (
      <div>
        <p>Error loading course layers: {error.message}</p>
        <button onClick={() => refetch()}>Retry</button>
      </div>
    );
  }

  return (
    <div>
      <h2>Course Layers</h2>
      <ul>
        {courseLayers.map((layer) => (
          <li key={layer.id}>{layer.name}</li>
        ))}
      </ul>
    </div>
  );
};

export default CourseLayers;
```

In this example:
- **Loading State**: Displays "Loading course layers..." while data is being fetched.
- **Error State**: If there's an error, it displays an error message along with a "Retry" button. The `refetch()` function can be called to retry fetching the data.

---

### Key Points

- **Error Handling**: React Query provides the `isError` flag and the error object to easily handle errors.
- **Refetching**: Use `refetch()` to manually reattempt data fetching, especially useful in case of errors.
- **Standardized Data Fetching**: Using React Query ensures a consistent, efficient approach to data management.

For further customization options, refer to the [React Query documentation](https://tanstack.com/query/latest/docs/framework/react/guides/query-functions). This documentation provides more details on handling data states, retries, and caching.